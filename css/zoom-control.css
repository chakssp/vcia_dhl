/**
 * Controle de Zoom Global
 * 
 * Ajuste o valor da variável --zoom-level para controlar o zoom da aplicação
 * Valores recomendados: 0.5 (50%), 0.6 (60%), 0.75 (75%), 0.8 (80%), 1.0 (100%)
 */

:root {
    /* Ajuste este valor para controlar o zoom */
    --zoom-level: 0.6;
}

/* Aplicação do zoom com suporte cross-browser */
html {
    /* Chrome, Safari, Opera */
    zoom: var(--zoom-level);
    
    /* Firefox */
    -moz-transform: scale(var(--zoom-level));
    -moz-transform-origin: 0 0;
    
    /* Ajusta a largura para compensar o zoom no Firefox */
    width: calc(100% / var(--zoom-level));
}

/* Melhoria na renderização de texto com zoom */
body {
    /* Force ClearType rendering */
    -webkit-font-smoothing: subpixel-antialiased !important;
    -moz-osx-font-smoothing: auto !important;
    text-rendering: optimizeLegibility !important;
    
    /* Melhora a qualidade do texto em zoom */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    
    /* Força GPU para melhor renderização */
    will-change: transform;
    
    /* Evita overflow horizontal */
    overflow-x: hidden !important;
}

/* Ajustes específicos para elementos fixos */
.modal-overlay,
.category-quick-backdrop,
.notification-container,
.floating-actions,
.quick-filters-bar,
.progress-global,
.quick-access-modal {
    /* Reseta o zoom para elementos fixos/absolutos */
    zoom: calc(1 / var(--zoom-level));
    -moz-transform: scale(calc(1 / var(--zoom-level)));
    -moz-transform-origin: 0 0;
}

/* Ajuste para o CategoryQuickSelector - REMOVIDO
   Agora controlado pelo responsive-positioning.css */

/* Media query para telas menores - zoom automático */
@media (max-width: 1400px) {
    :root {
        --zoom-level: 0.8;
    }
}

@media (max-width: 1200px) {
    :root {
        --zoom-level: 0.9;
    }
}

@media (max-width: 768px) {
    :root {
        --zoom-level: 1.0;
    }
}

/* Correção de posicionamento dos elementos fixos */
#kc-side-menu {
    /* Mantém posição original sem compensação */
    position: fixed !important;
    z-index: 9999 !important;
}

/* Ajuste de posicionamento dos botões flutuantes */
.floating-actions {
    /* Corrige posição considerando compensação de zoom e barra inferior */
    position: fixed !important;
    right: calc(20px / var(--zoom-level)) !important;
    bottom: calc(20px / var(--zoom-level)) !important;
    z-index: 999 !important; /* Abaixo da barra de filtros (1000) */
    display: flex !important;
    flex-direction: column !important;
    gap: calc(10px / var(--zoom-level)) !important;
    transition: bottom 0.3s ease !important;
}

/* Quando a barra de filtros está visível, ajusta posição dos botões */
.quick-filters-bar.show ~ .floating-actions,
body:has(.quick-filters-bar.show) .floating-actions {
    bottom: calc(90px / var(--zoom-level)) !important; /* 70px da barra + 20px de margem */
}

/* Correção para a barra de filtros inferior */
.quick-filters-bar {
    /* Previne overflow completamente */
    position: fixed !important;
    left: 0 !important;
    right: 0 !important;
    max-width: 100% !important;
    overflow: hidden !important;
    box-sizing: border-box !important;
}

.quick-filters-container {
    /* Container com scroll interno se necessário */
    display: flex !important;
    flex-wrap: nowrap !important;
    padding: 10px !important;
    box-sizing: border-box !important;
    overflow-x: auto !important;
    overflow-y: hidden !important;
    max-width: 100% !important;
    scrollbar-width: thin !important;
}

/* Estiliza a scrollbar do container */
.quick-filters-container::-webkit-scrollbar {
    height: 6px !important;
}

.quick-filters-container::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.1) !important;
}

.quick-filters-container::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.3) !important;
    border-radius: 3px !important;
}

/* Ajuste do container principal para evitar overflow */
html, body {
    max-width: 100% !important;
    overflow-x: hidden !important;
}

/* Previne scroll quando a barra de filtros está ativa */
body:has(.quick-filters-bar.show) {
    overflow-x: hidden !important;
    /* Removido padding-bottom que causava scroll vertical */
}

/* Classe utilitária para desabilitar zoom em elementos específicos */
.no-zoom {
    zoom: calc(1 / var(--zoom-level)) !important;
    -moz-transform: scale(calc(1 / var(--zoom-level))) !important;
}