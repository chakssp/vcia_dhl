<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowledge Consolidator - Power User v2 (Complete)</title>
    
    <!-- CSS Imports -->
    <link rel="stylesheet" href="css/tokens-dark.css">
    <link rel="stylesheet" href="css/layout-split.css">
    <link rel="stylesheet" href="css/components-dense.css">
    <link rel="stylesheet" href="css/sidebar-collapse.css">
    <link rel="stylesheet" href="css/file-list-alignment.css">
    
    <style>
        /* Additional styles for visual feedback */
        .status-btn {
            transition: all 0.2s ease;
            font-weight: 600;
        }
        
        .file-checkbox:hover {
            border-color: var(--primary-color);
            background: rgba(88, 166, 255, 0.1);
        }
        
        .category-item {
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .category-item:hover {
            background: var(--hover-bg);
            transform: translateX(4px);
        }
        
        .category-tag {
            display: inline-block;
            padding: 2px 8px;
            margin: 2px;
            background: var(--primary-color);
            color: white;
            border-radius: 12px;
            font-size: 11px;
        }
        
        .confidence-text {
            display: block;
            font-size: 11px;
            color: var(--success-color);
            margin-top: 2px;
        }
        
        .file-categories {
            margin-top: 4px;
        }
    </style>
</head>
<body class="terminal-theme">
    <!-- Command Palette Overlay -->
    <div id="command-palette" class="command-palette" role="dialog" aria-hidden="true">
        <div class="command-palette-backdrop"></div>
        <div class="command-palette-content">
            <div class="command-palette-header">
                <input 
                    type="text" 
                    id="command-input" 
                    class="command-input" 
                    placeholder="Type a command or search..." 
                    autocomplete="off"
                    spellcheck="false"
                >
                <kbd class="shortcut-hint">Esc</kbd>
            </div>
            <div class="command-palette-body">
                <div id="command-results" class="command-results">
                    <!-- Dynamic content -->
                </div>
                <div class="command-palette-footer">
                    <div class="shortcuts-info">
                        <span><kbd>‚Üë‚Üì</kbd> Navigate</span>
                        <span><kbd>Enter</kbd> Execute</span>
                        <span><kbd>Tab</kbd> Autocomplete</span>
                        <span><kbd>Esc</kbd> Close</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div class="app-container">
        <!-- Status Bar -->
        <header class="status-bar">
            <div class="status-left">
                <span class="status-item">
                    <span class="status-indicator online"></span>
                    <span class="status-text">KC v2.0</span>
                </span>
                <span class="status-item">
                    <span class="status-icon">üìÅ</span>
                    <span id="files-count">0 files</span>
                </span>
                <span class="status-item">
                    <span class="status-icon">üéØ</span>
                    <span id="active-filter">All</span>
                </span>
            </div>
            
            <div class="status-center">
                <span id="current-operation">Ready</span>
            </div>
            
            <div class="status-right">
                <span class="status-item">
                    <span class="status-icon">‚ö°</span>
                    <span id="confidence-avg">0%</span>
                </span>
                <span class="status-item">
                    <span class="status-icon">üîç</span>
                    <span id="analysis-progress">0/0</span>
                </span>
                <button class="command-trigger" title="Command Palette (Cmd+K)">
                    <span class="status-icon">‚åò</span>
                    <span class="shortcut-text">K</span>
                </button>
            </div>
        </header>

        <!-- Split Layout -->
        <main class="split-container">
            <!-- Sidebar (starts collapsed) -->
            <aside class="sidebar collapsed">
                <div class="sidebar-header">
                    <h2 class="sidebar-title">Navigation</h2>
                    <button class="collapse-btn" title="Toggle sidebar (Ctrl+B)">
                        <span class="icon">‚Äπ</span>
                    </button>
                </div>
                
                <!-- Quick Actions -->
                <section class="quick-actions">
                    <h3 class="section-title">Quick Actions</h3>
                    <div class="action-grid">
                        <button class="action-btn" data-action="discover-real" title="Discover Real Files (Ctrl+D)">
                            <span class="action-icon">üîç</span>
                            <span class="action-label">Discover Real Files</span>
                            <kbd class="action-shortcut">Ctrl+D</kbd>
                        </button>
                        <button class="action-btn" data-action="analyze" title="Analyze Files (Ctrl+A)">
                            <span class="action-icon">üß†</span>
                            <span class="action-label">Analyze</span>
                            <kbd class="action-shortcut">Ctrl+A</kbd>
                        </button>
                        <button class="action-btn" data-action="export" title="Export Data (Ctrl+E)">
                            <span class="action-icon">üì§</span>
                            <span class="action-label">Export</span>
                            <kbd class="action-shortcut">Ctrl+E</kbd>
                        </button>
                        <button class="action-btn" data-action="settings" title="Settings (Ctrl+,)">
                            <span class="action-icon">‚öôÔ∏è</span>
                            <span class="action-label">Settings</span>
                            <kbd class="action-shortcut">Ctrl+,</kbd>
                        </button>
                    </div>
                </section>

                <!-- Filters -->
                <section class="filters-panel">
                    <h3 class="section-title">Filters</h3>
                    
                    <div class="filter-group">
                        <label class="filter-label" for="relevance-filter">Relevance</label>
                        <select id="relevance-filter" class="filter-select">
                            <option value="all">All (0%+)</option>
                            <option value="30">Low (30%+)</option>
                            <option value="50">Medium (50%+)</option>
                            <option value="70">High (70%+)</option>
                            <option value="90">Critical (90%+)</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label" for="status-filter">Status</label>
                        <select id="status-filter" class="filter-select">
                            <option value="all">All Files</option>
                            <option value="pending">Pending Analysis</option>
                            <option value="analyzed">Analyzed</option>
                            <option value="categorized">Categorized</option>
                            <option value="archived">Archived</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label" for="time-filter">Time Range</label>
                        <select id="time-filter" class="filter-select">
                            <option value="all">All Time</option>
                            <option value="1d">Last Day</option>
                            <option value="1w">Last Week</option>
                            <option value="1m">Last Month</option>
                            <option value="3m">Last 3 Months</option>
                            <option value="1y">Last Year</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label" for="type-filter">File Type</label>
                        <select id="type-filter" class="filter-select">
                            <option value="all">All Types</option>
                            <option value="md">Markdown (.md)</option>
                            <option value="txt">Text (.txt)</option>
                            <option value="pdf">PDF (.pdf)</option>
                            <option value="docx">Word (.docx)</option>
                        </select>
                    </div>
                </section>

                <!-- Categories -->
                <section class="categories-panel">
                    <h3 class="section-title">Categories</h3>
                    <div id="categories-list" class="categories-list">
                        <!-- Dynamic content -->
                    </div>
                    <button class="add-category-btn" title="Add Category">
                        <span class="icon">+</span>
                        <span>Add Category</span>
                    </button>
                </section>
            </aside>

            <!-- Main Content -->
            <div class="main-content">
                <!-- Header -->
                <header class="content-header">
                    <div class="header-left">
                        <h1 class="page-title">Knowledge Consolidator</h1>
                        <div class="breadcrumb">
                            <span class="breadcrumb-item">Home</span>
                        </div>
                    </div>
                    
                    <div class="header-right">
                        <div class="view-controls">
                            <button class="view-btn active" data-view="list" title="List View">
                                <span class="icon">‚ò∞</span>
                            </button>
                            <button class="view-btn" data-view="grid" title="Grid View">
                                <span class="icon">‚äû</span>
                            </button>
                            <button class="view-btn" data-view="graph" title="Graph View">
                                <span class="icon">‚äö</span>
                            </button>
                        </div>
                        
                        <div class="search-controls">
                            <input 
                                type="text" 
                                id="search-input" 
                                class="search-input" 
                                placeholder="Search files... (Ctrl+F)"
                            >
                        </div>
                    </div>
                </header>

                <!-- Content Body -->
                <div class="content-body">
                    <!-- List View -->
                    <div id="list-view" class="view-container active">
                        <div class="file-list-header">
                            <div class="bulk-actions" id="bulk-actions" style="display: none;">
                                <span class="bulk-count" id="bulk-count">0 selected</span>
                                <button class="bulk-btn" data-action="analyze">
                                    <span class="icon">üß†</span>
                                    Analyze
                                </button>
                                <button class="bulk-btn" data-action="categorize">
                                    <span class="icon">üìÇ</span>
                                    Categorize
                                </button>
                                <button class="bulk-btn" data-action="archive">
                                    <span class="icon">üì¶</span>
                                    Archive
                                </button>
                            </div>
                            
                            <div class="sort-controls">
                                <label for="sort-select" class="sort-label">Sort by:</label>
                                <select id="sort-select" class="sort-select">
                                    <option value="relevance">Relevance</option>
                                    <option value="date">Date Modified</option>
                                    <option value="name">Name</option>
                                    <option value="size">Size</option>
                                    <option value="confidence">Confidence</option>
                                </select>
                                <button class="sort-direction" id="sort-direction" title="Toggle sort direction">
                                    <span class="icon">‚Üì</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="file-list" id="file-list">
                            <div class="empty-state">
                                <div class="empty-icon">üìÅ</div>
                                <h3>No files discovered yet</h3>
                                <p>Click "Discover Real Files" to browse your system</p>
                            </div>
                        </div>
                    </div>

                    <!-- Grid View -->
                    <div id="grid-view" class="view-container">
                        <div class="file-grid" id="file-grid">
                            <!-- Dynamic content -->
                        </div>
                    </div>

                    <!-- Graph View -->
                    <div id="graph-view" class="view-container">
                        <div class="graph-container">
                            <div class="graph-controls">
                                <button class="graph-btn" data-action="reset-zoom">
                                    <span class="icon">üîÑ</span>
                                    Reset
                                </button>
                                <button class="graph-btn" data-action="center">
                                    <span class="icon">‚äô</span>
                                    Center
                                </button>
                                <button class="graph-btn" data-action="physics">
                                    <span class="icon">‚ö°</span>
                                    Physics
                                </button>
                            </div>
                            <div class="graph-canvas">
                                <!-- Graph visualization -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Details Panel -->
            <aside class="details-panel">
                <div class="panel-header">
                    <h2 class="panel-title">Details</h2>
                    <button class="panel-close" title="Close Details">
                        <span class="icon">√ó</span>
                    </button>
                </div>
                
                <div class="panel-content" id="details-content">
                    <div class="empty-details">
                        <div class="empty-icon">üìÑ</div>
                        <p>Select a file to view details</p>
                    </div>
                </div>
            </aside>
        </main>
    </div>

    <!-- Keyboard Shortcuts Help -->
    <div id="shortcuts-help" class="shortcuts-overlay" aria-hidden="true">
        <div class="shortcuts-backdrop"></div>
        <div class="shortcuts-content">
            <div class="shortcuts-header">
                <h2>Keyboard Shortcuts</h2>
                <button class="shortcuts-close">√ó</button>
            </div>
            <div class="shortcuts-body">
                <div class="shortcuts-section">
                    <h3>Navigation</h3>
                    <dl class="shortcuts-list">
                        <dt><kbd>Ctrl</kbd> + <kbd>K</kbd></dt>
                        <dd>Open command palette</dd>
                        <dt><kbd>Ctrl</kbd> + <kbd>B</kbd></dt>
                        <dd>Toggle sidebar</dd>
                        <dt><kbd>Ctrl</kbd> + <kbd>F</kbd></dt>
                        <dd>Focus search</dd>
                    </dl>
                </div>
                
                <div class="shortcuts-section">
                    <h3>Actions</h3>
                    <dl class="shortcuts-list">
                        <dt><kbd>Ctrl</kbd> + <kbd>D</kbd></dt>
                        <dd>Discover files</dd>
                        <dt><kbd>Ctrl</kbd> + <kbd>A</kbd></dt>
                        <dd>Analyze files</dd>
                        <dt><kbd>Ctrl</kbd> + <kbd>E</kbd></dt>
                        <dd>Export data</dd>
                    </dl>
                </div>
                
                <div class="shortcuts-section">
                    <h3>Selection</h3>
                    <dl class="shortcuts-list">
                        <dt><kbd>Ctrl</kbd> + <kbd>Click</kbd></dt>
                        <dd>Multi-select files</dd>
                        <dt><kbd>Shift</kbd> + <kbd>Click</kbd></dt>
                        <dd>Range select</dd>
                        <dt><kbd>Ctrl</kbd> + <kbd>A</kbd></dt>
                        <dd>Select all</dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Indicator -->
    <div id="loading-indicator" class="loading-indicator" aria-hidden="true">
        <div class="loading-spinner"></div>
        <span class="loading-text">Processing...</span>
    </div>

    <!-- JavaScript -->
    <script type="module" src="js/keyboard-manager.js"></script>
    <script type="module" src="js/command-palette.js"></script>
    <script type="module" src="js/power-app-complete.js"></script>
</body>
</html>